chapter: chpt_runs
text: Runs
sections:
- section: sec_run_general
  text: General
  rules:
  - rule: rule_run
    text: |-
      A {term:run} is a Runner's attack on a server. There are 6 phases used in the procedure of carrying out a run, described in {ref/through:sec_run_initiation,sec_run_ends_phase}. A run always begins with the Initiation Phase. {ref:Sec_steps_of_a_run} contains the full set of steps carried out during each phase, and should be referred to in conjunction with the sections discussing the phases.
  - subsection: rule_attacked_server
    text: The {term:attacked server} is the server the Runner is attempting to reach, usually to breach that server.
    rules:
    - rule: rule_announce_attacked_server
      text: The Runner announces the attacked server in the initiation phase of the run.
    - rule: rule_change_attacked_server
      text: Card abilities can sometimes change the attacked server during the run. This does not end the run, but it can affect whether or not certain card abilities or effects apply.
    - rule: rule_change_runner_position
      text: If an ability changes the Runner's position, the attacked server and the current timing step of the run could also change. See {ref:TODO}.
    - rule: rule_change_attacked_server_directly
      text: A few abilities change the attacked server directly, without referring to the Runner's position. These abilities do not change the current timing step of the run.
      examples:
      - text: |-
          {card:Sneakdoor Beta}'s ability changes the attacked server from Archives to HQ. The Runner does not need to encounter ice protecting HQ after resolving this ability.
  - subsection: rule_modify_run_steps
    text: Many abilities modify the sequence of steps taken to resolve a run. Such abilities can direct players to skip steps or phases, replace steps with other effects, move directly from the current timing point to a new phase, or make other changes to the procedures explained in this section. Heed the Golden Rules in {ref:sec_golden_rules}.
    rules:
    - rule: rule_directly_approach_encounter
      text: Some abilities direct the Runner to approach or encounter a piece of ice as part of moving them to that ice's position. See {ref:TODO}.
    - rule: rule_approach_directly
      text: One card, {card:Code Replicator}, directs the Runner to approach the piece of ice in their position without first moving them to a new position. This effect changes the current timing step of the run to {ref:TODO}, the Approach Ice Phase.
    - rule: rule_forced_encounter
      text: An ability that directs the Runner to encounter a piece of ice without first moving the Runner's position does not change the current timing point of the run, the attacked server, or the Runner's position. The effect of such an ability is to resolve an Encounter Ice Phase independent of the current state of the run. See {ref:TODO}.
    - rule: rule_move_new_run_phase
      text: Any time the current timing step of the run is moved to a different phase of the run, except for an instruction to end the run (See {ref:rule_end_the_run}, below), no more steps in the previously-active phase are carried out. If a paid ability window is open, players complete that window normally. Then the active phase is complete and a checkpoint occurs. Finally, the game proceeds to the new phase.
    - rule: rule_run_phase_after
      text: If a condition refers to encountering a piece of ice "after" an approach or passing a piece of ice "after" an encounter, then that condition is only met by the indicated phases or steps occurring in direct sequence according to the standard progression of the run.
      examples:
      - text: The Runner uses {card:Inversificator} to break the subroutine on a {card:Miraju} that is protecting Archives. When the encounter ends, {card:Miraju}'s ability creates a replacement effect so that the Runner moves to the outermost position of Archives instead of passing {card:Miraju}. Because the ice is not passed, {card:Inversificator}'s ability does not meet its trigger condition. Later, the Runner encounters the same {card:Miraju} again and does not break its subroutine. When this encounter ends, the Runner passes {card:Miraju}. Even though the Runner has used {card:Inversificator} to fully break {card:Miraju} during an encounter earlier in the run, {card:Inversificator}'s trigger condition is not met when the Runner passes {card:Miraju} because the Runner is not passing it after the relevant encounter.
  - rule: rule_end_the_run
    text: To {term:end the run} is to halt the Runner's progress toward the server. When an effect ends the run, the current phase of the run ends without following any of its remaining steps, and before completing open priority windows. The game immediately moves from the current timing point to {ref:TODO}, the Run Ends Phase.
  - subsection: rule_jacking_out
    text: |-
      {term:Jacking out} is the process by which a Runner voluntarily ends a run. Jacking out follows the usual process for ending the run as described in {ref:rule_end_the_run}, but some card abilities function differently depending on whether or not the Runner chose to end the run by jacking out.
    rules:
    - rule: rule_jack_out_after_passing_ice
      text: The Runner has the opportunity to jack out after passing a piece of ice.
    - rule: rule_jack_out_before_approach
      text: If there is no ice protecting the server, the Runner has the opportunity to jack out before approaching the server.

- section: sec_position
  text: Position
  rules:
  - subsection: rule_position
    text: The Runner's {term:position} during a run is a measure of their distance from the server. The Runner's possible positions correspond to the positions of ice protecting the attacked server.
    rules:
    - rule: rule_position_caveats
      text: The Runner does not have a position while they are not engaged in a run, nor do they maintain their position from one run to the next. After a run initiates, the Runner moves to the outermost position of the attacked server, if it has any.
  - subsection: rule_position_progression
    text: The Runner progresses through the positions protecting a server (and corresponding ice) in order. They approach, encounter (if the ice is rezzed), and pass each piece of ice, then proceed to the next piece of ice moving inward, until they pass the innermost piece of ice or the run is ended.
    rules:
    - rule: rule_no_position_after_innermost_ice
      text: Once the Runner leaves the position of the innermost piece of ice protecting a server, they no longer have a position. This occurs at {ref:TODO} of the Movement Phase. However, abilities can still move the Runner to a position later in that phase.
    - rule: rule_no_position_after_approach_server
      text: During the Success Phase and the Run Ends Phase, the Runner has no position and can no longer move to a position.
      examples:
      - text: The Corp uses {card:Ganked!} to force the Runner to encounter {card:Cell Portal} in the middle of breaching a server. Since the run is already successful, resolving {card:Cell Portal}'s subroutine will have no meaningful effect except to derez {card:Cell Portal}.
  - subsection: rule_ice_change_can_affect_position
    text: Ice entering or leaving a position protecting the attacked server can affect the Runner's position.
    rules:
    - rule: rule_ice_change_outward
      text: If a piece of ice is added to or removed from the attacked server in a position outward from the Runner's current position, nothing happens. The Runner will normally not need to approach or encounter the new piece of ice to reach the server.
      examples:
      - text: During a run on R&D, {card:Architect}'s subroutines resolve and the Corp installs a new piece of ice in the outermost position protecting this server. The Runner does not approach that new piece of ice during this run because they have already passed that position.
    - rule: rule_ice_added_inward
      text: If a piece of ice is added to the attacked server in a position inward from the Runner's current position, the Runner and each piece of ice outside of the new ice's position shift one space outward.
      examples:
      - text: During a run on a remote server, {card:Howler}'s subroutine resolves, and the Corp installs a new piece of ice in the next inward position protecting the server. The Runner will have to approach that new piece of ice later in this run because they have not passed that position.
    - rule: rule_ice_removed_inward
      text: If a piece of ice inward from the Runner's position is uninstalled or moved to another server, the Runner and each piece of ice outside of the departed ice's position shift one space inward. The Runner does not re-approach ice they have already passed.
  - subsection: rule_ice_change_current_position
    text: Changes to the piece of ice in the Runner's current position can affect the progression of the run, but they do so differently during the Approach Ice Phase than during the Encounter Ice Phase.
    rules:
    - rule: rule_ice_change_approach_uninstall_move
      text: If a piece of ice is uninstalled or moved to another position (protecting this or another server) while it is being approached, the run moves to the Movement Phase, all outward ice moves one position inward, and the run continues. The Runner does not re-approach ice they have already passed.
      examples:
      - text: The Runner has passed 1 piece of ice and is approaching the innermost piece of ice, which is a rezzed {card:Himitsu-Bako}. During the paid ability window of the approach, the Corp uses the ability on {card:Himitsu-Bako} to add it to HQ. The Runner passes this position and will approach the server next, while the other piece of ice protecting the server moves to the innermost position.
    - rule: rule_ice_change_encounter_uninstall_derez
      text: If a piece of ice is uninstalled or derezzed while it is being encountered, the run moves to the Movement Phase. All outward ice moves one position inward if the ice was uninstalled, and the run continues. The Runner does not re-approach ice they have already passed.
    - rule: rule_ice_change_encounter_move_swap
      text: If a piece of ice currently being encountered moves to another position or is swapped with installed ice in another position, the Runner remains with the encountered ice and continues the run from that ice's new position.
      examples:
      - text: The Runner encounters {card:Bullfrog} as the innermost piece of ice protecting a remote server. {card:Bullfrog}'s subroutine resolves and it is moved to be the outermost piece of ice protecting Archives. The Runner is now running on Archives and continues the run from {card:Bullfrog}'s new position.
    - rule: rule_ice_change_approach_swap
      text: If a piece of ice currently being approached is swapped with ice in another position, the Runner remains in their current position and is now approaching the new piece of ice occupying that position.
    - rule: rule_ice_change_after_pass
      text: If a piece of ice is uninstalled, derezzed, moved, or swapped after it is passed, the Runner is not moved.
  - subsection: rule_move_runner_to_position
    text: During a run, abilities can move the Runner directly to a position.
    rules:
    - rule: rule_move_to_piece_of_ice
      text: If an ability instructs the Runner to move to a piece of ice in a different position, the Runner's position becomes the position corresponding to that ice, and the server that ice protects becomes the attacked server. The current timing step becomes {ref:TODO}, the Approach Ice Phase, or {ref:TODO}, the Encounter Ice Phase, according to whether the Runner was directed to approach or encounter the ice.
    - rule: rule_move_to_specific_position
      text: If an ability instructs the Runner to move to "the outermost position" of a server, that server becomes the attacked server. If there is any ice protecting that server, the Runner's position becomes the position of the outermost such piece of ice, and the current timing step becomes {ref:TODO}, the Approach Ice Phase. If there is no ice, the Runner ceases to have a position, and the current timing step becomes {ref:TODO}, the Movement Phase.
    - rule: rule_ineffective_move
      text: If an ability instructs the Runner to move to a position during the Success Phase, during the Run Ends Phase, or while there is no run in progress, instead the Runner does nothing. See {ref:TODO}.
    - rule: rule_move_to_current_ice
      text: If an ability instructs the Runner to move to and approach a position they are already approaching, instead the Runner does nothing.

- section: sec_run_initiation
  text: Initiation
  rules:
  - rule: rule_run_initiation_phase
    text: The {term:initiation phase} sets the parameters for the run and begins the run.
- section: sec_run_ends_phase
  text: Run Ends Phase
  rules:
  - rule: rule_run_ends_phase
    text: The {term:run ends phase} formalizes the end of the run and prepares the game to return to the timing structure from which the run was initiated.

- section: sec_steps_of_a_run
  text: Steps of a Run
  rules:
  - subsection: rule_sec_run_initiation_phase
    steps:
    text: Initiation Phase
    rules:
    - rule: step_initiation_announce
      text: The Runner announces the attacked server.
    - rule: step_initiation_bad_publicity
      text: The Runner gains 1[c] to spend during the run for each bad publicity the Corp has.
    - rule: step_initiation_formal_begin
      text: The run formally begins. Conditions related to the run beginning or initiating are met.
    - rule: step_initiation_complete
      text: |-
        The Initiation Phase is complete. If the attacked server has at least one piece of ice protecting it, proceed to {ref:rule_sec_run_approach_ice_phase}, Approach Ice Phase, approaching the outermost piece of ice protecting the attacked server. If the attacked server is not protected by ice, proceed to {ref:rule_sec_run_movement_phase}, Movement Phase.
  - subsection: rule_sec_run_approach_ice_phase
    steps:
    text: Approach Ice Phase
    rules:
    - rule: step_approach_begins
      text: The approach begins. Conditions related to the Runner approaching this ice are met.
    - rule: step_approach_paw
      text: A paid ability window occurs, in which players may use paid abilities and the Corp may rez non-ice cards. Additionally, the Corp can rez the approached piece of ice. (P) (R)
    - rule: step_approach_complete
      text: The Approach Ice Phase is complete. If the approached piece of ice is rezzed, continue to {ref:rule_sec_run_encounter_ice_phase}, Encounter Ice Phase. Otherwise, proceed to {ref:rule_sec_run_movement_phase}, Movement Phase.
  - subsection: rule_sec_run_encounter_ice_phase
    steps:
    text: Encounter Ice Phase
    rules:
    - rule: step_encounter_begins
      text: The encounter begins. Conditions related to the Runner encountering this ice are met.
    - rule: step_encounter_paw
      text: A paid ability window occurs, in which players may only use paid abilities. Subroutines on the encountered ice can be broken during this window. (P)
    - rule: step_check_finised_resolving_subroutines
      text: If there are unbroken subroutines that have not yet resolved this encounter, the Corp resolves the next such subroutine in order. Otherwise, skip to (e).
    - rule: step_resolve_next_subroutine
      text: Return to (c).
    - rule: step_encounter_complete
      text: The Encounter Ice Phase is complete. Continue to {ref:rule_sec_run_movement_phase}, Movement Phase.
  - subsection: rule_sec_run_movement_phase
    steps:
    text: Movement Phase
    rules:
    - rule: step_pass_ice
      text: If the Runner's position corresponds to a piece of ice, the Runner passes that ice. Conditions related to passing ice are met. If there are no positions more inward than the ice just passed, conditions related to passing all of the ice protecting a server are also met.
    - rule: step_before_jack_out_paw
      text: A paid ability window occurs, in which players may only use paid abilities. (P)
    - rule: step_jack_out_choice
      text: The Runner may choose to jack out, proceeding to {ref:rule_sec_run_run_ends_phase}, Run Ends Phase. If the Runner does not, continue to (d).
    - rule: step_move_position
      text: The Runner's position moves to the next position inward, if any.
    - rule: step_after_jack_out_paw
      text: A paid ability window occurs, in which players may use paid abilities and the Corp may rez non-ice cards. (P) (R)
    - rule: step_approach_new_ice
      text: If the Runner moved to a new position, return to {ref:rule_sec_run_approach_ice_phase}, Approach Ice Phase, approaching the piece of ice in their new position. If not, continue to (g).
    - rule: step_approach_server
      text: The Runner approaches the attacked server. Conditions related to the Runner approaching a server are met.
    - rule: step_movement_complete
      text: The Movement Phase is complete. Continue to {ref:rule_sec_run_success_phase}, Success Phase. 
  - subsection: rule_sec_run_success_phase
    steps:
    text: Success Phase
    rules:
    - rule: step_run_declared_successful
      text: The run is declared successful. Conditions related to a successful run are met.
    - rule: step_breach
      text: The Runner breaches the attacked server.
    - rule: step_success_complete
      text: The Success Phase is complete. Continue to step 6.9.6, Run Ends Phase.
  - subsection: rule_sec_run_run_ends_phase
    steps:
    text: Run Ends Phase
    rules:
    - rule: step_open_priority_windows_closed
      text: Any priority windows that were open when the run moved to this phase are completed or closed as described in {ref:TODO}.
    - rule: step_run_ends_bad_buplicity
      text: The Runner loses any unspent bad publicity credits.
    - rule: step_run_declared_unsuccessful
      text: If the Success Phase was not reached during this run and the attacked server still exists, the run becomes unsuccessful.
    - rule: step_run_complete
      text: The Run Ends Phase and the run as a whole are both complete.
